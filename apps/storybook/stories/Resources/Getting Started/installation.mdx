import { Meta } from '@storybook/addon-docs/blocks';

<Meta title="Resources/Getting Started/Installation & Setup" />

# Installation & Setup

Detailed setup reference for all supported environments. For a quick introduction, see the [Getting Started guide](?path=/docs/introduction-getting-started--docs).

## Prerequisites

| Requirement | Version |
|---|---|
| **Node.js** | 20.16+, 22.19+, or 24+ |
| **React** | 19.2+ or 18.3+ |
| **Package manager** | npm, yarn, or pnpm |

## Install Packages

```bash
# pnpm (recommended)
pnpm add @wyliedog/ui @wyliedog/tokens

# npm
npm install @wyliedog/ui @wyliedog/tokens

# yarn
yarn add @wyliedog/ui @wyliedog/tokens
```

### Peer Dependencies

```bash
pnpm add react react-dom lucide-react
```

## CSS Setup

Install Tailwind and its PostCSS plugin:

```bash
pnpm add tailwindcss @tailwindcss/postcss
```

Import the design system styles in your root CSS file:

```css
/* app/globals.css or src/index.css */
@import "@wyliedog/ui/styles";
```

Configure PostCSS:

```javascript
// postcss.config.js
export default {
  plugins: {
    '@tailwindcss/postcss': {},
  },
};
```

## TypeScript

```json
{
  "compilerOptions": {
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "jsx": "react-jsx",
    "strict": true
  }
}
```

## Framework-Specific Setup

### Next.js 15+

Import styles in your root layout:

```tsx
// app/layout.tsx
import '@wyliedog/ui/styles';

export default function RootLayout({ children }: { children: React.ReactNode }) {
  return (
    <html lang="en">
      <body>{children}</body>
    </html>
  );
}
```

For dark mode, add the class to `<html>`. The design system only requires the `dark` class to be present at render time — manage it with a server action, cookie, or client-side toggle as appropriate for your setup:

```tsx
<html lang="en" className="dark">
```

### Vite

```typescript
// vite.config.ts
import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';

export default defineConfig({
  plugins: [react()],
  optimizeDeps: {
    include: ['react', 'react-dom'],
  },
});
```

Import styles in your entry point:

```tsx
// src/main.tsx
import '@wyliedog/ui/styles';
import { StrictMode } from 'react';
import { createRoot } from 'react-dom/client';
import App from './App';

createRoot(document.getElementById('root')!).render(
  <StrictMode>
    <App />
  </StrictMode>
);
```

### Remix

```tsx
// app/root.tsx
import stylesheet from '@wyliedog/ui/styles?url';

export const links = () => [{ rel: 'stylesheet', href: stylesheet }];
```

## Verify Installation

```tsx
import { Button } from '@wyliedog/ui/button';
import { Card, CardHeader, CardTitle, CardContent } from '@wyliedog/ui/card';

export default function TestPage() {
  return (
    <div className="p-8">
      <Card>
        <CardHeader>
          <CardTitle>Installation successful</CardTitle>
        </CardHeader>
        <CardContent className="space-y-4">
          <p className="text-(--color-text-secondary)">
            If this card is styled correctly, the design system is working.
          </p>
          <Button>Get started</Button>
        </CardContent>
      </Card>
    </div>
  );
}
```

## Troubleshooting

### Styles not loading
1. Confirm `@import "@wyliedog/ui/styles"` is in your root CSS file and that file is imported in your entry point
2. Check that `@tailwindcss/postcss` is listed in your PostCSS config
3. Clear your bundler cache and restart the dev server

### TypeScript errors on imports
1. Set `moduleResolution: "bundler"` in `tsconfig.json`
2. Restart the TypeScript language server (`Cmd/Ctrl+Shift+P` → "TypeScript: Restart TS Server")
3. If errors persist, clear `node_modules` and reinstall: `pnpm install --frozen-lockfile`

### Dark mode not applying
The system applies dark tokens via a `.dark` class on `<html>` — no separate CSS import is needed:

```html
<html class="dark">
```

### Build errors
1. Confirm Node.js version: `node --version` (need 20.16+, 22.19+, or 24+)
2. Verify peer dependencies: `pnpm list react react-dom lucide-react`
3. Clear the pnpm store: `pnpm store prune`

## Next Steps

- [Quickstart Tutorial](?path=/docs/resources-getting-started-quickstart-tutorial--docs) — Build a complete interface in 10 minutes
- [Theming](?path=/docs/resources-theming-overview--docs) — Customize colors and dark mode
- [Composition Patterns](?path=/docs/resources-guides-composition-patterns--docs) — Patterns for building complex UIs
